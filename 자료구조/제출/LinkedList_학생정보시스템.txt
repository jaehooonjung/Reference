#include<iostream>
#include<string>
#include<conio.h>
using namespace std;

struct Node
{
	string name;
	int age;
	string address;
	int KorScore;
	int EngScore;
	int MathScore;
	int SumScore;
	float AvgScore;
	char Grade;
	Node* Next;
};

void MenuDraw()
{
	cout << "       << 메뉴 >>" << endl << endl;
	cout << "1. 학생 등록" << endl;
	cout << "2. 학생 검색" << endl;
	cout << "3. 학생 목록" << endl;
	cout << "4. 학생 수정" << endl;
	cout << "5. 학생 삭제" << endl;
	cout << "6. 종료" << endl;
	cout << "선택 : ";
}

void DataAutoSet(Node*Head)
{
	Head->SumScore = (Head->KorScore + Head->MathScore + Head->EngScore);
	Head->AvgScore = (Head->SumScore / 3.00f);

	if (Head->AvgScore >= 90)
		Head->Grade = 'A';
	else if (Head->AvgScore >= 80)
		Head->Grade = 'B';
	else if (Head->AvgScore >= 70)
		Head->Grade = 'C';
	else if (Head->AvgScore >= 60)
		Head->Grade = 'D';
	else if (Head->AvgScore >= 50)
		Head->Grade = 'E';
	else
		Head->Grade = 'F';

}

void Insert(Node**Head)
{
	if (*Head == NULL)
	{
		*Head = new Node;
		cout << "이름을 입력하세요 : ";
		cin >> (*Head)->name;
		cout << "나이를 입력하세요 : ";
		cin >> (*Head)->age;
		cout << "주소를 입력하세요 : ";
		cin >> (*Head)->address;
		cout << "국어점수를 입력하세요 : ";
		cin >> (*Head)->KorScore;
		cout << "영어점수를 입력하세요 : ";
		cin >> (*Head)->EngScore;
		cout << "수학점수를 입력하세요 : ";
		cin >> (*Head)->MathScore;
		(*Head)->Next = NULL;
		cout << "학생정보 입력완료" << endl;
		DataAutoSet(*Head);
		getch();
		return;
	}
	else
		Insert(&(*Head)->Next);
}

void ShowData(Node*Head)
{
	if (Head != NULL)
	{
		cout << "학생 정보 입니다." << endl;
		cout << "학생이름 : " << Head->name << endl;
		cout << "학생나이 : " << Head->age << endl;
		cout << "학생주소 : " << Head->address << endl;
		cout << "국어 점수 : " << Head->KorScore << endl;
		cout << "영어 점수 : " << Head->EngScore << endl;
		cout << "수학 점수 : " << Head->MathScore << endl;
		cout << "합계 점수 : " << Head->SumScore << endl;
		cout << "평균 점수 : " << Head->AvgScore << endl;
		cout << "학생 등급 : " << Head->Grade << endl;
	}
}

Node*Search(Node*Head, string name)
{
	Node*Tmp = Head;
	while (Tmp != NULL)
	{
		if (Tmp->name == name)
			return Tmp;
		Tmp = Tmp->Next;
	}
	return Tmp;
}

void ShowAllData(Node**Head)
{
	Node*Tmp = *Head;
	cout << "<< = = = = 정보 = = = = >>" << endl;
	cout << "학생이름\t학생나이\t학생주소" << endl;
	while (Tmp != NULL)
	{
		cout << Tmp->name << "		" << Tmp->age << "		" << Tmp->address << endl;
		Tmp = Tmp->Next;
	}
	getch();
}

void Modify(Node**Head, string name)
{
	Node*Tmp = *Head;
	Tmp = Search(Tmp, name);
	while ((*Head) != NULL)
	{
		int index, data;
		string strdata;
		cout << "1. 이름, 2. 나이, 3. 주소, 4. 점수, 5. 종료" << endl;
		cout << "수정할 항목을 선택하세요 ";
		cin >> index;
		switch (index)
		{
		case 1:
			cout << "바꿀 이름 입력 : ";
			cin >> strdata;
			Tmp->name = strdata;
			break;
		case 2:
			cout << "바꿀 나이 입력 : ";
			cin >> data;
			Tmp->age = data;
			break;
		case 3:
			cout << "바꿀 주소 입력 : ";
			cin >> strdata;
			Tmp->address = strdata;
			break;
		case 4:
			cout << "국어점수 : " << Tmp->KorScore << " 수학점수 : " << Tmp->MathScore << " 영어점수 : " << Tmp->EngScore << endl;
			cout << "수정할 국어 점수 입력 : ";
			cin >> data;
			Tmp->KorScore = data;
			cout << "수정할 수학 점수 입력 : ";
			cin >> data;
			Tmp->MathScore = data;
			cout << "수정할 영어 점수 입력 : ";
			cin >> data;
			Tmp->EngScore = data;
			break;
		case 5:
			system("cls");
			return;
		}
		cout << "수정 완료" << endl;
		getch();
	}
	cout << "저장된 데이터가 없습니다." << endl;
	getch();
}

void Delete(Node**Head, string name)
{
	Node*Tmp;
	while (*Head != NULL)
	{
		if ((*Head)->name == name)
		{
			Tmp = *Head;
			*Head = (*Head)->Next;
			delete Tmp;
			return;
		}
		Head = &(*Head)->Next;
	}
	cout << "해당 데이터가 없습니다." << endl;
}

void DeleteAll(Node*Head)
{
	if (Head == NULL)
		return;
	DeleteAll(Head->Next);
	delete Head;
}

void main()
{
	Node*Head = NULL;

	while (1)
	{
		int Select;
		string strdata;
		system("cls");
		MenuDraw();
		cin >> Select;
		system("cls");
		switch (Select)
		{
		case 1:
			Insert(&Head);
			break;
		case 2:
			cout << "찾으려는 학생의 이름을 입력하세요 : ";
			cin >> strdata;
			ShowData(Search(Head, strdata));
			getch();
			break;
		case 3:
			ShowAllData(&Head);
			break;
		case 4:
			cout << "찾으려는 학생의 이름을 입력하세요 : ";
			cin >> strdata;
			Modify(&Head, strdata);
			break;
		case 5:
			cout << "찾으려는 학생의 이름을 입력하세요 : ";
			cin >> strdata;
			Delete(&Head, strdata);
			break;
		case 6:
			DeleteAll(Head);
			return;
		}


	}

}